#!/bin/sh

name=benchmarks
version=0.0.1
skip_pkg_check=yes
revision=1
source_dir="benchmarks"
imagedeps="git build-essential"
hostdeps="gcc binutils libgcc-binaries"
deps="mlibc-headers mlibc freestnd-c-hdrs freestnd-cxx-hdrs libgcc"

build() {
    cp -pr "${source_dir}"/* .
    x86_64-salernos-mlibc-gcc runmany.c -o runmany
    x86_64-salernos-mlibc-gcc testpipe.c -o testpipe
    x86_64-salernos-mlibc-gcc loop.c -o loop
    x86_64-salernos-mlibc-gcc testclone.c -o testclone
    x86_64-salernos-mlibc-gcc testthreads.c -o testthreads
}

package() {
    mkdir -p "${dest_dir}"
    cp ./runmany "${dest_dir}"
    cp ./testpipe "${dest_dir}"
    cp ./loop "${dest_dir}"
    cp ./testclone "${dest_dir}"
    cp ./testthreads "${dest_dir}"
}
